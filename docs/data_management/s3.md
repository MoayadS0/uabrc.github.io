# Long-Term Storage

UAB Long-term storage (LTS) is an S3 object-storage platform hosted at UAB. This storage is designed to hold data that is not currently being used in analysis but should be kept for data sharing, recapitulation purposes, or reused for further analysis in the future. This documentation covers multiple methods for accessing LTS in Windows, Mac, and Linux environments.

<!-- markdownlint-disable MD046 -->
!!! important

    Currently, UAB LTS is only accessible using the campus network. If you are off campus and want to access LTS, please use the [UAB VPN](https://www.uab.edu/it/home/tech-solutions/network/vpn).

<!-- markdownlint-enable MD046 -->

## Requesting an Account

UAB researchers do not have automatic access to LTS, and currently, single sign on is not enabled. To request access to LTS, please send an email to [support@listserv.uab.edu](support@listserv.uab.edu). You will be then be given an Access Key and a Secret Access Key, both of which will be used later on. Keep track of both of these keys and do not share them with anyone else, these are your login credentials for LTS.

## Windows/Mac

To access LTS from Windows and Mac, we suggest using the [Cyberduck](https://cyberduck.io/download/) GUI which is free to download.

Once you have it installed and open, Cyberduck will look like this:

![!Cyberduck basic interface ><](images/cyberduck.png)

### Creating a Connection

First, download the [UAB CyberDuck Connection Profile](UAB S3 Object Storage.cyberduckprofile). After it's downloaded, double click the file to open it in Cyberduck. It will open the following connection creation window:

![!Cyberduck UAB Connection Creation ><](images/cyberduck-open-connection.png)

Input your Access Key and Secret Access Key sent to you by Research Computing after account creation in their appropriate fields. Once you've entered these keys you can close the connection creation window. This connection with the keys you entered is now saved as a bookmark for easy access in the future. Double click the created bookmark to open the connection to LTS.

### Creating a Bucket

Sets of storage objects are stored in what are called buckets. Buckets are sets of file systems for storing data. You can create different buckets for various purposes, such as separating buckets by dataset or project, or having a single bucket for all data you are moving off of Cheaha project storage.

In order to create a bucket, click `File > New Folder...` and then name the bucket you would like to create. Once the bucket is created, it will appear in the File window. An example could look like:

![!Example bucket creation](images/cyberduck-create-bucket.png)

The bucket will have the symbol of a hard disk with an Amazon A brand on it. This is the root of the file system for that bucket. You can then double click into it to open that file system.

### Uploading and Downloading Data

Once you're inside the bucket, files can be uploaded easily through dragging and dropping from your local machine into the GUI. You can also use the `Upload` button in the toolbar to open a file browser and choose what to upload.

Downloading files from the bucket can be done by first selecting the file(s)/folder(s) to download and then clicking the `Actions` button in the toolbar. In that dropdown will be a `Download` option. You can also get to this dropdown through the `File` menu or by right-clicking.

<!-- markdownlint-disable MD046-->
!!! note

   By default, all buckets and files you upload are only available to you.Currently, there is not a known method to add permissions for individual researchers in the Cyberduck interface. If you need to add access to a bucket or set of files within a bucket, please look in the Linux guide below. If you do not have access to a personal Linux machine, Cheaha is available to use for this purpose.
<!-- markdownlint-enable MD046-->

### Alternative Interfaces

In addition to Cyberduck, there are other GUI based programs for interfacing with UAB LTS. [S3 Browser](https://s3browser.com/) is an easy-to-use program for uploading and downloading files. However more sophisticated tools, such as setting file permissions, are hidden behind a paywall. This tool is also only available on Windows platforms. researchers can investigate this tool if desired, however research computing will not provide direct support for this program.

## Linux/Command Line

Linux has very few workable GUIs capable of accessing S3 storage for free available, and so almost all tools for transferring from Cheaha to LTS will be command line interfaces (CLI). The positives for this are that CLIs offer a much broader range of function available to researchers for managing their LTS buckets.

### Different CLIs

There are a couple of different CLIs available to researchers on Cheaha to use. These are [rclone](https://rclone.org/) and [s3cmd](https://s3tools.org/s3cmd). This documentation will show how to perform each function using both tools where possible and will give a comparison chart contrasting what each tool is useful for.

<!-- markdownlint-disable MD046 -->
!!! note

   Of note, both rclone and s3cmd are available for Windows and Mac as well if you are comfortable using command line interfaces on those platforms. There are installation instructions for both of these tools on their respective websites.
<!-- markdownlint-enable MD046 -->

### rclone

#### Configuration

<!-- markdownlint-disable MD046 -->
!!! note

   The installation instructions were tested on Cheaha's Linux platform. Installation for Mac and Windows systems will be different and not covered here.
<!-- markdownlint-enable MD046 -->

Before accessing the storage system, rclone needs to be installed and configured. Go to the [rclone downloads](https://rclone.org/downloads/) page and download the Linux Intel/AMD - 64 Bit package. Extract the package and then move the rclone application file to the `$HOME/bin` directory. You will have access to the `rclone` command in the terminal at any point now.

From here, rclone will need to be configured. This involves setting up the connection to the remote server. Open a terminal and enter `rclone config` to begin the configuration process.


